---
// src/pages/team/[name].astro
import Layout from '../../layouts/Layout.astro';

// Importa los datos del equipo
import team from '../../data/team.json';


// Genera las rutas estáticas
export const getStaticPaths = () => {
  return Object.keys(team).map((name) => ({
    params: { name },
  }));
};

// Tipado opcional
interface Props {
  params: {
    name: keyof typeof team;
  };
}

// Accede al parámetro
const { name } = Astro.params;

// Valida el parámetro
if (!name || typeof name !== 'string' || !(name in team)) {
  return Astro.redirect('/team');
}

// Type assertion to ensure 'name' is a key of 'team'
const member = team[name as keyof typeof team];
---

<Layout title={member.name}>
  <section class="py-20">
    <div class="container mx-auto px-4 max-w-4xl text-center">
      <img
        src={member.photo}
        alt={member.name}
        class="w-32 h-32 rounded-full mx-auto mb-6 border-4 border-purple-500 object-cover"
      />
      <h1 class="text-4xl font-bold text-white">{member.name}</h1>
      <p class="text-purple-300 text-xl mb-8">{member.role}</p>

      <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-8 text-left">
        <h2 class="text-2xl font-semibold text-white mb-4">Sobre mí</h2>
        <p class="text-white/85 mb-4">{member.biolong}</p>

        <div class="mt-6 space-y-3">
          <div class="flex items-center gap-2 text-sm">
            <span class="text-gray-300">📞</span>
            <span>{member.phone}</span>
          </div>
          <div class="flex items-center gap-2 text-sm">
            <span class="text-gray-300">📧</span>
            <span>{member.email}</span>
          </div>
          {member.social.linkedin && (
            <div class="flex items-center gap-2 text-sm">
              <span class="text-gray-300">💼</span>
              <a href={member.social.linkedin} target="_blank" rel="noopener" class="text-blue-400 hover:underline">
                LinkedIn
              </a>
            </div>
          )}
          {member.social.twitter && (
            <div class="flex items-center gap-2 text-sm">
              <span class="text-gray-300">🐦</span>
              <a href={member.social.twitter} target="_blank" rel="noopener" class="text-sky-400 hover:underline">
                Twitter/X
              </a>
            </div>
          )}
          {member.social.github && (
            <div class="flex items-center gap-2 text-sm">
              <span class="text-gray-300">🐙</span>
              <a href={member.social.github} target="_blank" rel="noopener" class="text-gray-300 hover:underline">
                GitHub
              </a>
            </div>
          )}
        </div>
      </div>

      <a href="/team" class="mt-8 inline-block px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded font-medium">
        ← Volver al equipo
      </a>
    </div>
  </section>
</Layout>